# 游戏中的随机数种子



### 一、前言

​	最近在思考客户端和服务端的随机数种子的时候才发现了这个问题。计算机中使用的随机数大多数都是伪随机数，即通过一定的随机种子，生成一个无限长的随机数列表。尤其如果我们是一个帧同步的游戏，在客户端需要做逻辑处理，就不可避免的需要在客户端使用随机数参与逻辑处理。所以如何使用随机数就是个问题。



### 二、不随机的随机数列表

​	随机数不随机。随机数确定后，就会确定顺序中生成的每个随机数，C、C++、Python、Java等主流语言的随机数生成器只要确定seed，就是无状态的了。我们可以通过统一随机数种子让帧同步的每个玩家都有相同的随机数次序（进行相同的次序取随机数都是相同的）。所以我们就需要所有C/S端都具有相同的步调取随机数。帧同步是将所有的玩家操作都会同步到客户端，所以每个客户端的步调也是一致的？



### 三、帧同步客户端中如何使用随机数

​	帧同步中，如果每个客户端是同步所有玩家操作的，那么我们设置一个全局的随机数就可以解决问题了。因为对于每个客户端来说，他们所看到的数据都是一致的，只不过所呈现的主视角不一致罢了，所以他们去取得随机数的时候顺序可以保证一致（根据我的猜测可以这样实现，假设客户端逻辑单线程），实际上仍然会有影响，比如丢包等问题。所以我想到了一种方式去使用随机数，我们使每个游戏对象都有一个随机种子，这样也许可以一部分去缓解问题，但是我猜没法解决。



### 四、如何解决？

我认为：
    1、保证客户端和服务端随机数算法一致
    2、逻辑上保证随机数生成次序是一致的（需要解决丢包问题？）
    3、丢包？看游戏表现上来说，可能是让发生丢帧的客户端自己追，并发空帧给别的客户端？比如王者掉线，自己本地看到的已经是错误的了，正确的操作正在由服务器广播，等到自己重连后追帧。
    4、探索其他办法